<?xml version="1.0" encoding="utf-8" standalone="no"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xt="http://www.jclark.com/xt"><xsl:template name="CodeLookUpTabularPrint"><xsl:param name="IdPrefix"/><xsl:param name="TitlePrefixPhrase"/><xsl:param name="BaseTitlePhrase" select="'Type'"/><xsl:param name="LookUpTable"/><xsl:param name="CodeValue2LookUp"/><xsl:param name="UseKeyCode2LookUp" select="'N'"/><xsl:param name="ShowKeyCodeValue" select="'Y'"/><xsl:param name="TitleType" select="'Field'"/><xsl:variable name="LookedUpElement"><xsl:choose><xsl:when test="$UseKeyCode2LookUp='Y'"><xsl:copy-of select="$LookUpTable/*/*[@KeyCode=$CodeValue2LookUp]"/></xsl:when><xsl:otherwise><xsl:copy-of select="$LookUpTable/*/*[@Code=$CodeValue2LookUp]"/></xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="LookedUpKeyCode"><xsl:choose><xsl:when test="$UseKeyCode2LookUp='Y'"><xsl:element name="KeyCode"><xsl:value-of select="$LookUpTable/*/*[@KeyCode=$CodeValue2LookUp]/@KeyCode"/></xsl:element></xsl:when><xsl:otherwise><xsl:element name="LookedUpKeyCode"><xsl:value-of select="$LookUpTable/*/*[@Code=$CodeValue2LookUp]/@KeyCode"/></xsl:element></xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="KeyCodeNode" select="xt:node-set($LookedUpKeyCode)"/><xsl:call-template name="TitledLeafFieldTabularPrint"><xsl:with-param name="FieldNameHeader" select="normalize-space(concat($TitlePrefixPhrase,' ',$BaseTitlePhrase))"/><xsl:with-param name="FieldNameTitle" select="normalize-space(concat($TitlePrefixPhrase,' ',$BaseTitlePhrase))"/><xsl:with-param name="IdPrefix" select="concat($IdPrefix,'LookUp_Field_')"/><xsl:with-param name="FieldDataContent"><div class="MaxWidth RptDetail DataContent"><xsl:choose><xsl:when test="string-length(normalize-space($LookedUpElement))"><xsl:attribute name="id"><xsl:value-of select="concat($IdPrefix,'LookedUp_Type')"/></xsl:attribute><xsl:attribute name="title"><xsl:value-of select="normalize-space(concat($TitlePrefixPhrase,' ',$BaseTitlePhrase))"/></xsl:attribute><xsl:value-of select="normalize-space($LookedUpElement)"/><xsl:if test="normalize-space($KeyCodeNode) and $ShowKeyCodeValue='Y'"><xsl:value-of select="' ('"/><xsl:call-template name="LeafFieldPrint"><xsl:with-param name="IdPrefix" select="$IdPrefix"/><xsl:with-param name="FieldNameId" select="'LookUp_Key_Code'"/><xsl:with-param name="FieldNameTitle" select="normalize-space(concat($TitlePrefixPhrase,' ',$BaseTitlePhrase,' Code'))"/><xsl:with-param name="FieldElement" select="$KeyCodeNode"/><xsl:with-param name="ShowAttribValues" select="'N'"/><xsl:with-param name="ShowContentValue" select="'Y'"/></xsl:call-template><xsl:value-of select="') '"/></xsl:if></xsl:when><xsl:when test="not(string-length(normalize-space($CodeValue2LookUp)))"/><xsl:otherwise><xsl:if test="$UseKeyCode2LookUp='Y'"><xsl:value-of select="' ('"/></xsl:if><xsl:call-template name="LeafContainerPrint"><xsl:with-param name="IdPrefix" select="$IdPrefix"/><xsl:with-param name="LeafContainerId" select="'LookUp_Value'"/><xsl:with-param name="LeafContainerTitle" select="normalize-space(concat($TitlePrefixPhrase,' ',$BaseTitlePhrase,' Code'))"/><xsl:with-param name="LeafContainerHeader" select="$CodeValue2LookUp"/><xsl:with-param name="ShowAsUnexpectedValue" select="'Y'"/><xsl:with-param name="ShowAttribValues" select="'N'"/><xsl:with-param name="TitleType" select="'Field'"/></xsl:call-template><xsl:if test="$UseKeyCode2LookUp='Y'"><xsl:value-of select="') '"/></xsl:if></xsl:otherwise></xsl:choose></div></xsl:with-param></xsl:call-template><xsl:text/></xsl:template></xsl:stylesheet>